<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exam Timetable and Study Schedule</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            display: flex;
            flex-direction: row;
            justify-content: space-between;
        }

        #left-container, #right-container {
            flex: 1;
            margin-right: 20px;
        }

        #right-container {
            order: -1; /* Change the order to place the right container first */
        }

        form {
            max-width: 300px;
            margin: 0 auto;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        input, select {
            width: 100%;
            padding: 8px;
            margin-bottom: 15px;
            box-sizing: border-box;
        }

        button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 15px;
            border: none;
            cursor: pointer;
        }

        #scheduleList, #studyList, #todoList {
            list-style-type: none;
            padding: 0;
        }

        #scheduleList li, #studyList li, #todoList li {
            padding: 10px;
            border-bottom: 1px solid #ccc;
        }

        #scheduleList li:last-child, #studyList li:last-child, #todoList li:last-child {
            border-bottom: none;
        }
    </style>
</head>
<body>

    <div id="left-container">
        <h2>Calendar</h2>
        <div id="calendar"></div>

        <h2>To-Do List</h2>
        <ul id="todoList"></ul>
    </div>

    <div id="right-container">
        <h1>Exam Timetable and Study Schedule</h1>

        <!-- Exam Form -->
        <form id="examForm">
            <label for="subject">Subject:</label>
            <input type="text" id="subject" name="subject" required>

            <label for="date">Exam Date:</label>
            <input type="date" id="date" name="date" required>

            <label for="time">Exam Time:</label>
            <input type="time" id="time" name="time" required>

            <button type="button" onclick="addExam()">Add Exam</button>
        </form>

        <!-- Study Form -->
        <form id="studyForm">
            <label for="studySubject">Subject:</label>
            <input type="text" id="studySubject" name="studySubject" required>

            <label for="studyDate">Study Date:</label>
            <input type="date" id="studyDate" name="studyDate" required>

            <label for="studyTime">Study Time:</label>
            <input type="time" id="studyTime" name="studyTime" required>

            <button type="button" onclick="addStudy()">Add Study Session</button>
        </form>

        <h2>Entered Exam Timetable</h2>
        <ul id="examList"></ul>

        <h2>Study Schedule</h2>
        <ul id="studyList"></ul>
    </div>

    <script>
        let exams = [];
        let studySessions = [];
        let schedule = [];
        let todoList = [];

        function addExam() {
            const subject = document.getElementById('subject').value;
            const date = document.getElementById('date').value;
            const time = document.getElementById('time').value;

            if (subject && date && time) {
                exams.push({ title: Exam: ${subject}, start: ${date}T${time}, allDay: false });
                addToSchedule(subject, Exam - Date: ${date}, Time: ${time});
                addToTodoList(Prepare for ${subject} exam);

                // Update the calendar
                updateCalendar();

                // Add the exam to the list
                const examList = document.getElementById('examList');
                const listItem = document.createElement('li');
                listItem.textContent = ${subject} - Date: ${date}, Time: ${time};
                examList.appendChild(listItem);

                // Clear input fields
                document.getElementById('subject').value = '';
                document.getElementById('date').value = '';
                document.getElementById('time').value = '';
            } else {
                alert('Please fill in all fields.');
            }
        }

        function addStudy() {
            const studySubject = document.getElementById('studySubject').value;
            const studyDate = document.getElementById('studyDate').value;
            const studyTime = document.getElementById('studyTime').value;

            if (studySubject && studyDate && studyTime) {
                studySessions.push({ title: Study: ${studySubject}, start: ${studyDate}T${studyTime}, allDay: false });
                addToSchedule(studySubject, Study - Date: ${studyDate}, Time: ${studyTime});
                addToTodoList(Study for ${studySubject});

                // Update the calendar
                updateCalendar();

                // Add the study session to the list
                const studyList = document.getElementById('studyList');
                const listItem = document.createElement('li');
                listItem.textContent = Study - ${studySubject} - Date: ${studyDate}, Time: ${studyTime};
                studyList.appendChild(listItem);

                // Clear input fields
                document.getElementById('studySubject').value = '';
                document.getElementById('studyDate').value = '';
                document.getElementById('studyTime').value = '';
            } else {
                alert('Please fill in all fields.');
            }
        }

        function addToSchedule(subject, details) {
            const existingSubjectIndex = schedule.findIndex(item => item.subject === subject);

            if (existingSubjectIndex !== -1) {
                // Subject already exists in the schedule, update details
                schedule[existingSubjectIndex].details.push(details);
            } else {
                // Add a new entry for the subject in the schedule
                schedule.push({ subject, details: [details] });
            }

            // Update the schedule list
            updateScheduleList();
        }

        function addToTodoList(task) {
            todoList.push(task);
            updateTodoList();
        }

        function updateScheduleList() {
            const scheduleList = document.getElementById('scheduleList');
            scheduleList.innerHTML = '';

            schedule.forEach(item => {
                const listItem = document.createElement('li');
                listItem.innerHTML = `<strong>${item.subject}</strong><ul>${item.details.map(detail => <li>${detail}</li>).join('')}</ul>`;
                scheduleList.appendChild(listItem);
            });
        }

        function updateTodoList() {
            const todoListContainer = document.getElementById('todoList');
            todoListContainer.innerHTML = '';

            todoList.forEach(task => {
                const listItem = document.createElement('li');
                listItem.textContent = task;
                todoListContainer.appendChild(listItem);
            });
        }

        function updateCalendar() {
            $('#calendar').fullCalendar('destroy');
            initCalendar();
        }

        function initCalendar() {
            $('#calendar').fullCalendar({
                header: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'month,agendaWeek,agendaDay'
                },
                events: exams.concat(studySessions)
            });
        }

        // Initialize the calendar
        initCalendar();
    </script>

</body>
</html>